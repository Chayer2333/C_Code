{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Setup-MSVC-env",  // æ·»åŠ  cl.exe ä¸º path ç¯å¢ƒ
            "type": "shell",            // å¤±è´¥,åªèƒ½é…ç½®ä¸ºå±€éƒ¨ç¯å¢ƒä½¿ç”¨(å¯¹äºç¼–è¯‘é“¾æ¥è¯´)
            
            "command": "echo æ­£åœ¨å°è¯•è®¾ç½®MSVCç¯å¢ƒ... && call \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Auxiliary\\Build\\vcvarsall.bat\" x64 && echo ç¯å¢ƒè®¾ç½®æˆåŠŸï¼ || echo ç¯å¢ƒè®¾ç½®å¤±è´¥ï¼",
            "args": [], // args ç•™ç©ºï¼Œå› ä¸ºå‘½ä»¤å·²å…¨éƒ¨åœ¨ command ä¸­
            "options": {
                // ğŸ‘‡ å…³é”®é…ç½®ï¼šæŒ‡å®šä½¿ç”¨çº¯ cmd.exe ä½œä¸ºæ‰§è¡Œç¯å¢ƒ
                "shell": {
                    "executable": "cmd.exe",
                    "args": ["/c"]
                }
            },
            "problemMatcher": [],
            "presentation": {
                "reveal": "silent",
                "panel": "shared"
            },
            "isBackground": true
        },
        {
            "label": "çŒ«çŒ«æŠ›æ¥ä¸€ä¸ªç¨‹åºå–µ",    // éœ€ä¸ launch "preLaunchTask" å­—æ®µä¿æŒä¸€è‡´
            "type": "cppbuild",
            "command": "cl.exe",
            "args": [
                "/Zi",
                "/EHsc",
                // "/nologo",       // éšè—ç‰ˆæƒä¿¡æ¯
                "/Fo:Buffer/",      // .objæ–‡ä»¶è¾“å‡ºåˆ°Bufferæ–‡ä»¶å¤¹
                "/Fd:Buffer/",      // .pdbæ–‡ä»¶è¾“å‡ºåˆ°Bufferæ–‡ä»¶å¤¹
                "/FeEXE/${fileBasenameNoExtension}_MSVC.exe",  // .exeæ–‡ä»¶è¾“å‡ºåˆ°EXEæ–‡ä»¶å¤¹
                "${file}",
                "/link",            // æ·»åŠ é“¾æ¥å™¨å‚æ•°åˆ†éš”ç¬¦
                "/INCREMENTAL",     // å¯ç”¨å¢é‡é“¾æ¥ï¼ˆç”Ÿæˆ.ilkæ–‡ä»¶ï¼‰
                "/ILK:Buffer/${fileBasenameNoExtension}.ilk",  // .ilkæ–‡ä»¶è¾“å‡ºä½ç½®
                "/PDB:Buffer/${fileBasenameNoExtension}.pdb",  // é“¾æ¥å™¨ .pdb
                "/DEBUG"            // ç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼ˆä¸/Ziå¯¹åº”ï¼‰
            ],
            "options": {
                "cwd": "E:/8_Buffer/C_Compile/MSVC"
            },
            "problemMatcher": [
                "$msCompile"
            ],
            "group": {
                "kind": "build",
                "isDefault": true   // å®šä¹‰ä¸ºé»˜è®¤ä½¿ç”¨çš„ä»»åŠ¡æ¨¡å¼
            },
            // "dependsOn": ["Setup-MSVC-env"],    // è‡ªåŠ¨é…ç½® cl.exe çš„ç¯å¢ƒå˜é‡,ä¾èµ–äº "label": "Setup-Msvc-Env"
            // "dependsOrder": "sequence",
            "detail": "ç¼–è¯‘å™¨: cl.exe"
        },
        {
            "label": "TDM-GCC C17æ ‡å‡†",
            "type": "shell",
            "command": "powershell",                            // è¿è¡Œçš„ä»»åŠ¡
            "args": [                                           // 4. ä¼ é€’ç»™å‘½ä»¤çš„å‚æ•°
                "-ExecutionPolicy",                             // ç»•è¿‡æ‰§è¡Œç­–ç•¥é™åˆ¶
                "Bypass",                                       // å…è®¸è¿è¡Œè„šæœ¬
                "-File",                                        // æŒ‡å®šè¦è¿è¡Œçš„æ–‡ä»¶
                "${workspaceFolder}/.vscode/Auto_Clean.ps1",    // è„šæœ¬è·¯å¾„åŠåç§°
                "${file}"                                       // å½“å‰æ–‡ä»¶è·¯å¾„
            ],
            /*"options": {
                "cwd": "E:/8_Buffer/C_Compile/TDM-GCC" // æŒ‡å‘æ–°çš„è”æ¥æ ¹ç›®å½•
            },*/
            /*"options": {
                "cwd": "C:/TDM-GCC-64/bin"
            },*/
            "problemMatcher": [
                "$gcc"              // 6. é—®é¢˜åŒ¹é…å™¨ï¼ˆè§£æç¼–è¯‘é”™è¯¯ï¼‰
            ],
            "group": {
                "kind": "build",
                "isDefault": false  // è®¾ä¸ºfalseï¼Œä¸è¦†ç›–é»˜è®¤MSVCä»»åŠ¡
            },
            "detail": "ä½¿ç”¨ç‹¬ç«‹TDM-GCCç¼–è¯‘ï¼Œæ ‡å‡†C17"        // ä»»åŠ¡æè¿°
        }
    ]
}